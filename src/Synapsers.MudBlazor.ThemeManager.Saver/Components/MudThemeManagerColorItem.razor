@using global::MudBlazor
@using global::MudBlazor.Utilities
@using global::MudBlazor.Components
@namespace Synapsers.MudBlazor.ThemeManager.Saver

<MudOverlay @bind-Visible="_isOpen" AutoClose="true" OnClick="@(() => _isOpen = false)" />

<div class="relative">
    <div class="mud-list-item-clickable mud-ripple px-4 py-3" @onclick="ToggleOpen">
        <MudText Typo="Typo.body2" Class="mud-float-left">@Name</MudText>
        <div style="background:@(string.IsNullOrWhiteSpace(Color) ? "transparent" : Color);"
             class="px-8 py-3 mud-float-right rounded mud-elevation-25"></div>
    </div>
    <MudPopover Open="@_isOpen" Elevation="25" Square="true" TransformOrigin="Origin.TopCenter"
        AnchorOrigin="Origin.BottomCenter">
        <MudColorPicker @key="@Name" Class="mud-thememanager-color-picker"
                        PickerVariant="PickerVariant.Static" 
                        Elevation="0" 
                        Value="_internalPickerColorForBinding" ValueChanged="OnPickerValueChanged"   @onmouseup="OnPickerSelectionCommitted" ColorPickerView="ColorPickerView" />
    </MudPopover>
</div>
